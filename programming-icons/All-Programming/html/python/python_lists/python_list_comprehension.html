<h2>List Comprehension in Python</h2>
<p>A <strong>list comprehension</strong> is a concise way to create lists. It is similar to set builder notation in mathematics. It is used to define a <a href="/python/python_lists.htm" target="_blank">list</a> based on an existing iterable object, such as a list, tuple, or string, and apply an expression to each element in the iterable.</p>
<h3>Syntax of Python List Comprehension</h3>
<p>The basic syntax of list comprehension is &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">new_list <span class="token operator">=</span> <span class="token punctuation">[</span>expression <span class="token keyword">for</span> item <span class="token keyword">in</span> iterable <span class="token keyword">if</span> condition<span class="token punctuation">]</span></div>
<p>Where,</p>
<ul class="list">
<li><strong>expression</strong> is the operation or transformation to apply to each item in the iterable.</li>
<li><strong>item</strong> is the variable representing each element in the iterable.</li>
<li><strong>iterable</strong> is the sequence of elements to iterate over.</li>
<li><strong>condition (optional)</strong> is an expression that filters elements based on a specified condition.</li>
</ul>
<h3>Example of Python List Comprehension</h3>
<p>Suppose we want to convert all the letters in the string "hello world" to their upper-case form. Using list comprehension, we iterate through each character, check if it is a letter, and if so, convert it to uppercase, resulting in a list of uppercase letters &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">string <span class="token operator">=</span> <span class="token string">"hello world"</span> uppercase_letters <span class="token operator">=</span> <span class="token punctuation">[</span>char<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> char <span class="token keyword">in</span> string <span class="token keyword">if</span> char<span class="token punctuation">.</span>isalpha<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">print</span><span class="token punctuation">(</span>uppercase_letters<span class="token punctuation">)</span></div>
</div>
<p>The result obtained is displayed as follows &minus;</p>
<pre class="result notranslate">['H', 'E', 'L', 'L', 'O', 'W', 'O', 'R', 'L', 'D']
</pre>
<div class="inserted-div">&nbsp;</div>
<h2>List Comprehensions and Lambda</h2>
<p>In Python, <strong>lambda</strong> is a keyword used to create anonymous functions. An anonymous function is a function defined without a name. These functions are created using the <strong>lambda</strong> keyword followed by a comma-separated list of arguments, followed by a colon <strong>:</strong>, and then the expression to be evaluated.</p>
<p>We can use list comprehension with lambda by applying the lambda function to each element of an iterable within the comprehension, generating a new list.</p>
<h3>Example</h3>
<p>In the following example, we are using list comprehension with a lambda function to double each element in a given list "original_list". We iterate over each element in the "original_list" and apply the lambda function to double it &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">original_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> doubled_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> original_list<span class="token punctuation">]</span> <span class="token keyword">print</span><span class="token punctuation">(</span>doubled_list<span class="token punctuation">)</span></div>
</div>
<p>Following is the output of the above code &minus;</p>
<pre class="result notranslate">[2, 4, 6, 8, 10]
</pre>
<h2>Nested Loops in Python List Comprehension</h2>
<p>A nested loop in Python is a loop inside another loop, where the inner loop is executed multiple times for each iteration of the outer loop.</p>
<p>We can use nested loops in list comprehension by placing one loop inside another, allowing for concise creation of lists from multiple iterations.</p>
<h3>Example</h3>
<p>In this example, all combinations of items from two lists in the form of a tuple are added in a third list object &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">list1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> list2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span> CombLst<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> list1 <span class="token keyword">for</span> y <span class="token keyword">in</span> list2<span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>CombLst<span class="token punctuation">)</span></div>
</div>
<p>It will produce the following output &minus;</p>
<pre class="result notranslate">[(1, 4), (1, 5), (1, 6), (2, 4), (2, 5), (2, 6), (3, 4), (3, 5), (3, 6)]
</pre>
<h2>Conditionals in Python List Comprehension</h2>
<p>Conditionals in Python refer to the use of statements like "if", "elif", and "else" to control the flow of a code based on certain conditions. They allow you to execute different blocks of code depending on whether a condition evaluates to "True" or "False".</p>
<p>We can use conditionals in list comprehension by including them after the iterable and before the loop, which filters elements from the iterable based on the specified condition while generating the list.</p>
<h3>Example</h3>
<p>The following example uses conditionals within a list comprehension to generate a list of even numbers from 1 to 20 &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">list1<span class="token operator">=</span><span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token keyword">if</span> x<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>list1<span class="token punctuation">)</span></div>
</div>
<p>We get the output as follows &minus;</p>
<pre class="result notranslate">[2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
</pre>
<h2>List Comprehensions vs For Loop</h2>
<p>List comprehensions and for loops are both used for iteration, but they differ in terms of syntax and usage.</p>
<p>List comprehensions are like shortcuts for creating lists in Python. They let you generate a new list by applying an operation to each item in an existing list.</p>
<p>For loop, on the other hand, is a control flow statement used to iterate over elements of an iterable one by one, executing a block of code for each element.</p>
<blockquote>List comprehensions are often preferred for simpler operations, while for loops offer more flexibility for complex tasks.</blockquote>
<h3>Example Using For Loop</h3>
<p>Suppose we want to separate each letter in a string and put all non-vowel letters in a list object. We can do it by a for loop as shown below &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">chars<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> ch <span class="token keyword">in</span> <span class="token string">'TutorialsPoint'</span><span class="token punctuation">:</span> <span class="token keyword">if</span> ch <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token string">'aeiou'</span><span class="token punctuation">:</span> chars<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>chars<span class="token punctuation">)</span></div>
</div>
<p>The chars list object is displayed as follows &minus;</p>
<pre class="result notranslate">['T', 't', 'r', 'l', 's', 'P', 'n', 't']
</pre>
<h3>Example Using List Comprehension</h3>
<p>We can easily get the same result by a list comprehension technique. A general usage of list comprehension is as follows &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">listObj <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> iterable<span class="token punctuation">]</span></div>
<p>Applying this, chars list can be constructed by the following statement &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">chars <span class="token operator">=</span> <span class="token punctuation">[</span> char <span class="token keyword">for</span> char <span class="token keyword">in</span> <span class="token string">'TutorialsPoint'</span> <span class="token keyword">if</span> char <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token string">'aeiou'</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>chars<span class="token punctuation">)</span></div>
</div>
<p>The chars list will be displayed as before &minus;</p>
<pre class="result notranslate">['T', 't', 'r', 'l', 's', 'P', 'n', 't']
</pre>
<h3>Example</h3>
<p>The following example uses list comprehension to build a list of squares of numbers between 1 to 10 &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">squares <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token operator">*</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>squares<span class="token punctuation">)</span></div>
</div>
<p>The squares list object is &minus;</p>
<pre class="result notranslate">[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
</pre>
<h2>Advantages of List Comprehension</h2>
<p>Following are the advantages of using list comprehension &minus;</p>
<ul class="list">
<li>
<p><strong>Conciseness &minus;</strong> List comprehensions are more concise and readable compared to traditional for loops, allowing you to create lists with less code.</p>
</li>
<li>
<p><strong>Efficiency &minus;</strong> List comprehensions are generally faster and more efficient than for loops because they are optimized internally by Python's interpreter.</p>
</li>
<li>
<p><strong>Clarity &minus;</strong> List comprehensions result in clearer and more expressive code, making it easier to understand the purpose and logic of the operation being performed.</p>
</li>
<li>
<p><strong>Reduced Chance of Errors &minus;</strong> Since list comprehensions are more compact, there is less chance of errors compared to traditional for loops, reducing the likelihood of bugs in your code.&nbsp;</p>
</li>
</ul>
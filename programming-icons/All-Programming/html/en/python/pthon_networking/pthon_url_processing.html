
<p>In the world of Internet, different resources are identified by URLs (Uniform Resource Locators). Python's standard library includes the <strong>urllib</strong> package, which has modules for working with URLs. It helps you parse URLs, fetch web content, and manage errors.</p>
<p>This tutorial introduces urllib basics to help you start using it. Improve your skills in web scraping, fetching data, and managing URLs with Python using urllib.</p>
<p>The <strong>urllib</strong> package contains the following modules for processing URLs &minus;</p>
<ul class="list">
<li>
<p><strong>urllib.parse</strong> module is used for parsing a URL into its parts.</p>
</li>
<li>
<p><strong>urllib.request</strong> module contains functions for opening and reading URLs</p>
</li>
<li>
<p><strong>urllib.error</strong> module carries definitions of the exceptions raised by urllib.request</p>
</li>
<li>
<p><strong>urllib.robotparser</strong> module parses the robots.txt files</p>
</li>
</ul>
<h2>The urllib.parse Module</h2>
<p>This module serves as a standard interface to obtain various parts from a URL string. The module contains following functions &minus;</p>
<h3>urlparse(urlstring)</h3>
<p>Parse a URL into six components, returning a 6-item named tuple. Each tuple item is a string corresponding to following attributes &minus;</p>
<table class="table table-bordered" style="text-align: center;">
<tbody>
<tr>
<th style="text-align: center;">Attribute</th>
<th style="text-align: center;">Index</th>
<th style="text-align: center;">Value</th>
</tr>
<tr>
<td>scheme</td>
<td>0</td>
<td>URL scheme specifier</td>
</tr>
<tr>
<td>netloc</td>
<td>1</td>
<td>Network location part</td>
</tr>
<tr>
<td>path</td>
<td>2</td>
<td>Hierarchical path</td>
</tr>
<tr>
<td>params</td>
<td>3</td>
<td>Parameters for last path element</td>
</tr>
<tr>
<td>query</td>
<td>4</td>
<td>Query component</td>
</tr>
<tr>
<td>fragment</td>
<td>5</td>
<td>Fragment identifier</td>
</tr>
<tr>
<td>username</td>
<td>&nbsp;</td>
<td>User name</td>
</tr>
<tr>
<td>password</td>
<td>&nbsp;</td>
<td>Password</td>
</tr>
<tr>
<td>hostname</td>
<td>&nbsp;</td>
<td>Host name (lower case)</td>
</tr>
<tr>
<td>Port</td>
<td>&nbsp;</td>
<td>Port number as integer, if present</td>
</tr>
</tbody>
</table>
<h3>Example</h3>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse url <span class="token operator">=</span> <span class="token string">"https://example.com/employees/name/?salary&gt;=25000"</span> parsed_url <span class="token operator">=</span> urlparse<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>parsed_url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Scheme:"</span><span class="token punctuation">,</span>parsed_url<span class="token punctuation">.</span>scheme<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"netloc:"</span><span class="token punctuation">,</span> parsed_url<span class="token punctuation">.</span>netloc<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"path:"</span><span class="token punctuation">,</span> parsed_url<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"params:"</span><span class="token punctuation">,</span> parsed_url<span class="token punctuation">.</span>params<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Query string:"</span><span class="token punctuation">,</span> parsed_url<span class="token punctuation">.</span>query<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Frgment:"</span><span class="token punctuation">,</span> parsed_url<span class="token punctuation">.</span>fragment<span class="token punctuation">)</span></div>
</div>
<p>It will produce the following <strong>output</strong> &minus;</p>
<pre class="result notranslate">&lt;class 'urllib.parse.ParseResult'&gt;
Scheme: https
netloc: example.com
path: /employees/name/
params:
Query string: salary&gt;=25000
Frgment:
</pre>
<h3>parse_qs(qs))</h3>
<p>This function Parse a query string given as a string argument. Data is returned as a dictionary. The dictionary keys are the unique query variable names and the values are lists of values for each name.</p>
<p>To further fetch the query parameters from the query string into a dictionary, use parse_qs() function of the query attribute of ParseResult object as follows &minus;</p>
<p><strong>Example</strong></p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlparse<span class="token punctuation">,</span> parse_qs url <span class="token operator">=</span> <span class="token string">"https://example.com/employees?name=Anand&amp;salary=25000"</span> parsed_url <span class="token operator">=</span> urlparse<span class="token punctuation">(</span>url<span class="token punctuation">)</span> dct <span class="token operator">=</span> parse_qs<span class="token punctuation">(</span>parsed_url<span class="token punctuation">.</span>query<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Query parameters:"</span><span class="token punctuation">,</span> dct<span class="token punctuation">)</span></div>
</div>
<p>It will produce the following <strong>output</strong> &minus;</p>
<pre class="result notranslate">Query parameters: {'name': ['Anand'], 'salary': ['25000']}
</pre>
<h3>urlsplit(urlstring)</h3>
<p>This is similar to urlparse(), but does not split the params from the URL. This should generally be used instead of urlparse() if the more recent URL syntax allowing parameters to be applied to each segment of the path portion of the URL is wanted.</p>
<h3>urlunparse(parts)</h3>
<p>This function is the opposite of urlparse() function. It constructs a URL from a tuple as returned by urlparse(). The parts argument can be any six-item iterable. This returns an equivalent URL.</p>
<h3>Example</h3>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlunparse lst <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https'</span><span class="token punctuation">,</span> <span class="token string">'example.com'</span><span class="token punctuation">,</span> <span class="token string">'/employees/name/'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'salary&gt;=25000'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span> new_url <span class="token operator">=</span> urlunparse<span class="token punctuation">(</span>lst<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"URL:"</span><span class="token punctuation">,</span> new_url<span class="token punctuation">)</span></div>
</div>
<p>It will produce the following <strong>output</strong> &minus;</p>
<pre class="result notranslate">URL: https://example.com/employees/name/?salary&gt;=25000
</pre>
<h3>urlunsplit(parts)</h3>
<p>Combine the elements of a tuple as returned by urlsplit() into a complete URL as a string. The parts argument can be any five-item iterable.</p>
<div class="inserted-div">&nbsp;</div>
<h2>The urllib.request Module</h2>
<p>This module offers the functions and classes for handling the URL's opening and reading operations by using the <strong>urlopen()</strong> function.</p>
<h3>urlopen() function</h3>
<p>This function opens the given URL, which can be either a string or a Request object. The optional timeout parameter specifies a timeout in seconds for blocking operations This actually only works for HTTP, HTTPS and FTP connections.</p>
<p>This function always returns an object which can work as a context manager and has the properties url, headers, and status. For HTTP and HTTPS URLs, this function returns a http.client.HTTPResponse object slightly modified.</p>
<h3>Example</h3>
<p>The following code uses urlopen() function to read the binary data from an image file, and writes it to local file. You can open the image file on your computer using any image viewer.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> urlopen obj <span class="token operator">=</span> urlopen<span class="token punctuation">(</span><span class="token string">"https://dummy/logo.png"</span><span class="token punctuation">)</span> data <span class="token operator">=</span> obj<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span> img <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"img.jpg"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> img<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span> img<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></div>
<p>It will produce the following <strong>output</strong> &minus;</p>
<h2>The Request Object</h2>
<p>The urllib.request module includes Request class. This class is an abstraction of a URL request. The constructor requires a mandatory string argument a valid URL.</p>
<h3>Syntax</h3>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> headers<span class="token punctuation">,</span> origin_req_host<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span></div>
<h3>Parameters</h3>
<ul class="list">
<li>
<p><strong>url</strong> &minus; A string that is a valid URL</p>
</li>
<li>
<p><strong>data</strong> &minus; An object specifying additional data to send to the server. This parameter can only be used with HTTP requests. Data may be bytes, file-like objects, and iterables of bytes-like objects.</p>
</li>
<li>
<p><strong>headers</strong> &minus; Should be a dictionary of headers and their associated values.</p>
</li>
<li>
<p><strong>origin_req_host</strong> &minus; Should be the request-host of the origin transaction</p>
</li>
<li>
<p><strong>method</strong> &minus; should be a string that indicates the HTTP request method. One of GET, POST, PUT, DELETE and other HTTP verbs. Default is GET.</p>
</li>
</ul>
<h3>Example</h3>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> Request obj <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">"https://www.tutorialspoint.com/"</span><span class="token punctuation">)</span></div>
<p>This Request object can now be used as an argument to urlopen() method.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> Request<span class="token punctuation">,</span> urlopen obj <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">"https://www.tutorialspoint.com/"</span><span class="token punctuation">)</span> resp <span class="token operator">=</span> urlopen<span class="token punctuation">(</span>obj<span class="token punctuation">)</span></div>
<p>The urlopen() function returns a HttpResponse object. Calling its read() method fetches the resource at the given URL.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> Request<span class="token punctuation">,</span> urlopen obj <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">"https://www.tutorialspoint.com/"</span><span class="token punctuation">)</span> resp <span class="token operator">=</span> urlopen<span class="token punctuation">(</span>obj<span class="token punctuation">)</span> data <span class="token operator">=</span> resp<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span></div>
<h3>Sending Data</h3>
<p>If you define data argument to the Request constructor, a POST request will be sent to the server. The data should be any object represented in bytes.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> Request<span class="token punctuation">,</span> urlopen <span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> urlencode values <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Madhu'</span><span class="token punctuation">,</span> <span class="token string">'location'</span><span class="token punctuation">:</span> <span class="token string">'India'</span><span class="token punctuation">,</span> <span class="token string">'language'</span><span class="token punctuation">:</span> <span class="token string">'Hindi'</span> <span class="token punctuation">}</span> data <span class="token operator">=</span> urlencode<span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> obj <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">"https://example.com"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span></div>
<h3>Sending Headers</h3>
<p>The Request constructor also accepts header argument to push header information into the request. It should be in a dictionary object.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span> user_agent<span class="token punctuation">}</span> obj <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">"https://example.com"</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> headers<span class="token punctuation">)</span></div>
<h2>The urllib.error Module</h2>
<p>Following exceptions are defined in urllib.error module &minus;</p>
<h3>URLError</h3>
<p>URLError is raised because there is no network connection (no route to the specified server), or the specified server doesn't exist. In this case, the exception raised will have a 'reason' attribute.</p>
<p><strong>Example</strong></p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> Request<span class="token punctuation">,</span> urlopen <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>error <span class="token keyword">as</span> err obj <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">"http://www.nosuchserver.com"</span><span class="token punctuation">)</span> <span class="token keyword">try</span><span class="token punctuation">:</span> urlopen<span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token keyword">except</span> err<span class="token punctuation">.</span>URLError <span class="token keyword">as</span> e<span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span></div>
<p>It will produce the following <strong>output</strong> &minus;</p>
<pre class="result notranslate">HTTP Error 403: Forbidden
</pre>
<h3>HTTPError</h3>
<p>Every time the server sends a HTTP response it is associated with a numeric "status code". It code indicates why the server is unable to fulfill the request. The default handlers will handle some of these responses for you. For those it can't handle, urlopen() function raises an HTTPError. Typical examples of HTTPErrors are '404' (page not found), '403' (request forbidden), and '401' (authentication required).</p>
<p><strong>Example</strong></p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> urllib<span class="token punctuation">.</span>request <span class="token keyword">import</span> Request<span class="token punctuation">,</span> urlopen <span class="token keyword">import</span> urllib<span class="token punctuation">.</span>error <span class="token keyword">as</span> err obj <span class="token operator">=</span> Request<span class="token punctuation">(</span><span class="token string">"http://www.python.org/fish.html"</span><span class="token punctuation">)</span> <span class="token keyword">try</span><span class="token punctuation">:</span> urlopen<span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token keyword">except</span> err<span class="token punctuation">.</span>HTTPError <span class="token keyword">as</span> e<span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span></div>
<p>It will produce the following <strong>output</strong> &minus;</p>
<pre class="result notranslate">404&nbsp;</pre>
</div>
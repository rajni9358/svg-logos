<p><strong>Metaclasses</strong> are a powerful feature in Python that allow you to customize class creation. By using metaclasses, you can add specific behaviors, attributes, and methods to classes, and allowing you to create more flexible, efficient programs. This classes provides the ability to work with <a href="/python/python_metaprogramming_with_metaclasses.htm">metaprogramming</a> in Python.</p>
<p><strong>Metaclasses</strong> are an <a href="/python/python_oops_concepts.htm" target="_blank">OOP concept</a> present in all python code by default. Python provides the functionality to create custom metaclasses by using the keyword <strong>type</strong>. Type is a metaclass whose instances are classes. Any class created in python is an instance of <strong>type</strong> metaclass.</p>
<h2>Creating Metaclasses in Python</h2>
<p>A metaclass is a class of a class that defines how a class behaves. Every class in Python is an instance of its metaclass. By default, Python uses <a href="/python/python_type_function.htm" target="_blank"><strong>type()</strong> function</a> to construct the metaclasses. However, you can define your own metaclass to customize class creation and behavior.</p>
<p>When defining a class, if no base classes or metaclass are explicitly specified, then Python uses <strong>type()</strong> to construct the class. Then its body is executed in a new namespace, resulting class name is locally linked to the output of <strong>type(name, bases, namespace)</strong>.</p>
<h3>Example</h3>
<p>Let's observe the result of creating a class object without specifying specific bases or a metaclass</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">class</span> <span class="token class-name">Demo</span><span class="token punctuation">:</span> <span class="token keyword">pass</span> obj <span class="token operator">=</span> Demo<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></div>
</div>
<p><strong>Output</strong></p>
<p>On executing the above program, you will get the following results &minus;</p>
<pre class="result notranslate">&lt;__main__.Demo object at 0x7fe78f43fe80&gt;
</pre>
<p>This example demonstrates the basics of metaprogramming in Python using metaclasses. The above output indicates that <strong>obj</strong> is an instance of the <strong>Demo</strong> class, residing in memory location <strong>0x7fe78f43fe80</strong>. This is the default behavior of the Python metaclass, allowing us to easily inspect the details of the class.</p>
<div class="inserted-div">&nbsp;</div>
<h2>Creating Metaclasses Dynamically</h2>
<p>The <strong>type()</strong> function in Python can be used to create classes metaclasses dynamically.</p>
<h3>Example</h3>
<p>In this example, DemoClass will created using type() function, and an instance of this class is also created and displayed.</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token comment"># Creating a class dynamically using type()</span> DemoClass <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token string">'DemoClass'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> obj <span class="token operator">=</span> DemoClass<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span></div>
</div>
<p><strong>Output</strong></p>
<p>Upon executing the above program, you will get the following results &minus;</p>
<pre class="result notranslate">&lt;__main__.DemoClass object at 0x7f9ff6af3ee0&gt;
</pre>
<h3>Example</h3>
<p>Here is another example of <strong>creating a Metaclass with inheritance</strong> which can be done by inheriting one from another class using <strong>type()</strong> function.</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">class</span> <span class="token class-name">Demo</span><span class="token punctuation">:</span> <span class="token keyword">pass</span> Demo2 <span class="token operator">=</span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token string">'Demo2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>Demo<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>attribute<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> obj <span class="token operator">=</span> Demo2<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>attribute<span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__class__<span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__bases__<span class="token punctuation">)</span></div>
</div>
<p><strong>Output</strong></p>
<p>Following is the output &minus;</p>
<pre class="result notranslate">10
&lt;class '__main__.Demo2'&gt;
(&lt;class '__main__.Demo'&gt;,)
</pre>
<h2>Customizing Metaclass Creation</h2>
<p>In Python, you can customize how classes are created and initialized by defining your own metaclass. This customization is useful for various metaprogramming tasks, such as adding specific behavior to all instances of a class or enforcing certain patterns across multiple classes.</p>
<p>Customizing the classes can be done by overriding methods in the metaclass, specifically <strong>__new__</strong> and <strong>__init__</strong>.</p>
<h3>Example</h3>
<p>Let's see the example of demonstrating how we can customize class creation using the <strong>__new__</strong> method of a metaclass in python.</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token comment"># Define a custom metaclass</span> <span class="token keyword">class</span> <span class="token class-name">MyMetaClass</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">def</span> <span class="token function">__new__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> name<span class="token punctuation">,</span> bases<span class="token punctuation">,</span> dct<span class="token punctuation">)</span><span class="token punctuation">:</span> dct<span class="token punctuation">[</span><span class="token string">'version'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token comment"># Modify the class name</span> name <span class="token operator">=</span> <span class="token string">'Custom'</span> <span class="token operator">+</span> name <span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__new__<span class="token punctuation">(</span>cls<span class="token punctuation">,</span> name<span class="token punctuation">,</span> bases<span class="token punctuation">,</span> dct<span class="token punctuation">)</span> <span class="token comment"># MetaClass acts as a template for the custom metaclass</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>MyMetaClass<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">pass</span> <span class="token comment"># Instantiate the class</span> obj <span class="token operator">=</span> Demo<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Print the class name and version attribute</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Class Name:"</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span>__name__<span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Version:"</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>version<span class="token punctuation">)</span></div>
</div>
<p><strong>Output</strong></p>
<p>While executing above code, you will get the following results &minus;</p>
<pre class="result notranslate">Class Name: CustomDemo
Version: 1.0
</pre>
<h3>Example</h3>
<p>Here is another example that demonstrates how to customize the metaclass using the <strong>__init__</strong> in Python.</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token comment"># Define a custom metaclass</span> <span class="token keyword">class</span> <span class="token class-name">2yCreating</span> MetaClass<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> name<span class="token punctuation">,</span> bases<span class="token punctuation">,</span> dct<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Initializing class'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment"># Add a class-level attribute</span> cls<span class="token punctuation">.</span>version<span class="token operator">=</span> <span class="token number">10</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> bases<span class="token punctuation">,</span> dct<span class="token punctuation">)</span> <span class="token comment"># Define a class using the custom metaclass</span> <span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span>metaclass<span class="token operator">=</span>MyMetaClass<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>value <span class="token operator">=</span> value <span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Value: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>value<span class="token punctuation">}</span></span><span class="token string">, Version: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>version<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token comment"># Instantiate the class and demonstrate its usage</span> obj <span class="token operator">=</span> MyClass<span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span> obj<span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span></div>
</div>
<p><strong>Output</strong></p>
<p>While executing above code, you will get the following results &minus;</p>
<pre class="result notranslate">Initializing class MyClass
Value: 42, Version: 10
</pre>
<div class="library-page-bottom-nav ">&nbsp;</div>
<div class="bottom-library-ads mt" style="margin: 5px;">
<div id="google-bottom-ads" class="google-bottom-ads">
<div style="width: 728px; height: 250px;">&nbsp;</div>
</div>
</div>
<p>A Decorator in Python is a function that receives another function as argument. The argument function is the one to be decorated by decorator. The behaviour of argument function is extended by the decorator without actually modifying it.</p>
<p>In this chapter, we whall learn how to use Python decorator.</p>
<h2>Defining Function Decorator</h2>
<p><a href="/python/python_functions.htm" target="_blank">Function in Python</a> is a first order object. It means that it can be passed as argument to another function just as other <a href="/python/python_data_types.htm" target="_blank">data types</a> such as number, string or list etc. It is also possible to define a function inside another function. Such a function is called nested function. Moreover, a function can return other function as well.</p>
<p>The typical definition of a decorator function is as under &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>arg_function<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#arg_function to be decorated</span> <span class="token keyword">def</span> <span class="token function">nested_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#this wraps the arg_function and extends its behaviour</span> <span class="token comment">#call arg_function</span> arg_function<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">return</span> nested_function</div>
<p>Here a normal Python function &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span></div>
<p>You can now decorate this function to extend its behaviour by passing it to decorator &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">function<span class="token operator">=</span>decorator<span class="token punctuation">(</span>function<span class="token punctuation">)</span></div>
<p>If this function is now executed, it will show output extended by decorator.</p>
<div class="inserted-div">&nbsp;</div>
<h2>Examples of Python Decorators</h2>
<p>Practice the following examples to understand the concept of Python decorators &minus;</p>
<h3>Example 1</h3>
<p>Following code is a simple example of decorator &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">my_function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"The number is="</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span> <span class="token keyword">def</span> <span class="token function">my_decorator</span><span class="token punctuation">(</span>some_function<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Inside wrapper to check odd/even"</span><span class="token punctuation">)</span> <span class="token keyword">if</span> num<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> ret<span class="token operator">=</span> <span class="token string">"Even"</span> <span class="token keyword">else</span><span class="token punctuation">:</span> ret<span class="token operator">=</span> <span class="token string">"Odd!"</span> some_function<span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token keyword">return</span> ret <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"wrapper function is called"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> wrapper no<span class="token operator">=</span><span class="token number">10</span> my_function <span class="token operator">=</span> my_decorator<span class="token punctuation">(</span>my_function<span class="token punctuation">,</span> no<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"It is "</span><span class="token punctuation">,</span>my_function<span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">)</span></div>
</div>
<p>The my_function() just prints out the received number. However, its behaviour is modified by passing it to a my_decorator. The inner function receives the number and returns whether it is odd/even. Output of above code is &minus;</p>
<pre class="result notranslate">wrapper function is called
Inside wrapper to check odd/even
The number is= 10
It is Even
</pre>
<h3>Example 2</h3>
<p>An elegant way to decorate a function is to mention just before its definition, the name of decorator prepended by @ symbol. The above example is re-written using this notation &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">my_decorator</span><span class="token punctuation">(</span>some_function<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Inside wrapper to check odd/even"</span><span class="token punctuation">)</span> <span class="token keyword">if</span> num<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> ret<span class="token operator">=</span> <span class="token string">"Even"</span> <span class="token keyword">else</span><span class="token punctuation">:</span> ret<span class="token operator">=</span> <span class="token string">"Odd!"</span> some_function<span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token keyword">return</span> ret <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"wrapper function is called"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> wrapper <span class="token decorator annotation punctuation">@my_decorator</span> <span class="token keyword">def</span> <span class="token function">my_function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"The number is="</span><span class="token punctuation">,</span>x<span class="token punctuation">)</span> no<span class="token operator">=</span><span class="token number">10</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"It is "</span><span class="token punctuation">,</span>my_function<span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">)</span></div>
</div>
<p>Python's standard library defines following built-in decorators &minus;</p>
<h2>@classmethod Decorator</h2>
<p>The classmethod is a built-in function. It transforms a method into a class method. A class method is different from an instance method. Instance method defined in a class is called by its object. The method received an implicit object referred to by self. A class method on the other hand implicitly receives the class itself as first argument.</p>
<h3>Syntax</h3>
<p>In order to declare a class method, the following notation of decorator is used &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">class</span> <span class="token class-name">Myclass</span><span class="token punctuation">:</span> <span class="token decorator annotation punctuation">@classmethod</span> <span class="token keyword">def</span> <span class="token function">mymethod</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#....</span></div>
<p>The @classmethod form is that of function decorator as described earlier. The mymethod receives reference to the class. It can be called by the class as well as its object. That means Myclass.mymethod as well as Myclass().mymethod both are valid calls.</p>
<h3>Example of @classmethod Decorator</h3>
<p>Let us understand the behaviour of class method with the help of following example &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">class</span> <span class="token class-name">counter</span><span class="token punctuation">:</span> count<span class="token operator">=</span><span class="token number">0</span> <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"init called by "</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span> counter<span class="token punctuation">.</span>count<span class="token operator">=</span>counter<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"count="</span><span class="token punctuation">,</span>counter<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token decorator annotation punctuation">@classmethod</span> <span class="token keyword">def</span> <span class="token function">showcount</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"called by "</span><span class="token punctuation">,</span>cls<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"count="</span><span class="token punctuation">,</span>cls<span class="token punctuation">.</span>count<span class="token punctuation">)</span> c1<span class="token operator">=</span>counter<span class="token punctuation">(</span><span class="token punctuation">)</span> c2<span class="token operator">=</span>counter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"class method called by object"</span><span class="token punctuation">)</span> c1<span class="token punctuation">.</span>showcount<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"class method called by class"</span><span class="token punctuation">)</span> counter<span class="token punctuation">.</span>showcount<span class="token punctuation">(</span><span class="token punctuation">)</span></div>
<p>In the class definition count is a class attribute. The __init__() method is the constructor and is obviously an instance method as it received self as object reference. Every object declared calls this method and increments count by 1.</p>
<p>The @classmethod decorator transforms showcount() method into a class method which receives reference to the class as argument even if it is called by its object. It can be seen even when c1 object calls showcount, it displays reference of counter class.</p>
<p>It will display the following <strong>output</strong> &minus;</p>
<pre class="result notranslate">init called by &lt;__main__.counter object at 0x000001D32DB4F0F0&gt;
count= 1
init called by &lt;__main__.counter object at 0x000001D32DAC8710&gt;
count= 2
class method called by object
called by &lt;class '__main__.counter'&gt;
count= 2
class method called by class
called by &lt;class '__main__.counter'&gt;
</pre>
<h2>@staticmethod Decorator</h2>
<p>The staticmethod is also a built-in function in Python standard library. It transforms a method into a static method. Static method doesn't receive any reference argument whether it is called by instance of class or class itself. Following notation used to declare a static method in a class &minus;</p>
<h3>Syntax</h3>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">class</span> <span class="token class-name">Myclass</span><span class="token punctuation">:</span> <span class="token decorator annotation punctuation">@staticmethod</span> <span class="token keyword">def</span> <span class="token function">mymethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#....</span></div>
<p>Even though Myclass.mymethod as well as Myclass().mymethod both are valid calls, the static method receives reference of neither.</p>
<h3>Example of @staticmethod Decorator</h3>
<p>The counter class is modified as under &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">class</span> <span class="token class-name">counter</span><span class="token punctuation">:</span> count<span class="token operator">=</span><span class="token number">0</span> <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"init called by "</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span> counter<span class="token punctuation">.</span>count<span class="token operator">=</span>counter<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"count="</span><span class="token punctuation">,</span>counter<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token decorator annotation punctuation">@staticmethod</span> <span class="token keyword">def</span> <span class="token function">showcount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"count="</span><span class="token punctuation">,</span>counter<span class="token punctuation">.</span>count<span class="token punctuation">)</span> c1<span class="token operator">=</span>counter<span class="token punctuation">(</span><span class="token punctuation">)</span> c2<span class="token operator">=</span>counter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"class method called by object"</span><span class="token punctuation">)</span> c1<span class="token punctuation">.</span>showcount<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"class method called by class"</span><span class="token punctuation">)</span> counter<span class="token punctuation">.</span>showcount<span class="token punctuation">(</span><span class="token punctuation">)</span></div>
<p>As before, the class attribute count is increment on declaration of each object inside the __init__() method. However, since mymethod(), being a static method doesn't receive either self or cls parameter. Hence value of class attribute count is displayed with explicit reference to counter.</p>
<p>The <strong>output</strong> of the above code is as below &minus;</p>
<pre class="result notranslate">init called by &lt;__main__.counter object at 0x000002512EDCF0B8&gt;
count= 1
init called by &lt;__main__.counter object at 0x000002512ED48668&gt;
count= 2
class method called by object
count= 2
class method called by class
count= 2
</pre>
<h2>@property Decorator</h2>
<p>Python's property() built-in function is an interface for accessing instance variables of a class. The @property decorator turns an instance method into a "getter" for a read-only attribute with the same name, and it sets the docstring for the property to "Get the current value of the instance variable."</p>
<p>You can use the following three decorators to define a property &minus;</p>
<ul class="list">
<li>
<p><strong>@property</strong> &minus; Declares the method as a property.</p>
</li>
<li>
<p><strong>@&lt;property-name&gt;.setter:</strong> &minus; Specifies the setter method for a property that sets the value to a property.</p>
</li>
<li>
<p><strong>@&lt;property-name&gt;.deleter</strong> &minus; Specifies the delete method as a property that deletes a property.</p>
</li>
</ul>
<p>A property object returned by property() function has getter, setter, and delete methods.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token builtin">property</span><span class="token punctuation">(</span>fget<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> fset<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> fdel<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> doc<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span></div>
<p>The fget argument is the getter method, fset is setter method. It optionally can have fdel as method to delete the object and doc is the documentation string.</p>
<h3>Syntax</h3>
<p>The property() object's setter and getter may also be assigned with the following syntax also.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">speed <span class="token operator">=</span> <span class="token builtin">property</span><span class="token punctuation">(</span><span class="token punctuation">)</span> speed<span class="token operator">=</span>speed<span class="token punctuation">.</span>getter<span class="token punctuation">(</span>speed<span class="token punctuation">,</span> get_speed<span class="token punctuation">)</span> speed<span class="token operator">=</span>speed<span class="token punctuation">.</span>setter<span class="token punctuation">(</span>speed<span class="token punctuation">,</span> set_speed<span class="token punctuation">)</span></div>
<p>Where get_speed() and set_speeds() are the instance methods that retrieve and set the value to an instance variable speed in Car class.</p>
<p>The above statements can be implemented by @property decorator. Using the decorator car class is re-written as &minus;</p>
<h3>Example of @property Decorator</h3>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">class</span> <span class="token class-name">car</span><span class="token punctuation">:</span> <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> speed<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>_speed<span class="token operator">=</span>speed <span class="token keyword">return</span> <span class="token decorator annotation punctuation">@property</span> <span class="token keyword">def</span> <span class="token function">speed</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">return</span> self<span class="token punctuation">.</span>_speed <span class="token decorator annotation punctuation">@speed<span class="token punctuation">.</span>setter</span> <span class="token keyword">def</span> <span class="token function">speed</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> speed<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">if</span> speed<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token keyword">or</span> speed<span class="token operator">&gt;</span><span class="token number">100</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"speed limit 0 to 100"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> self<span class="token punctuation">.</span>_speed<span class="token operator">=</span>speed <span class="token keyword">return</span> c1<span class="token operator">=</span>car<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>c1<span class="token punctuation">.</span>speed<span class="token punctuation">)</span> <span class="token comment">#calls getter</span> c1<span class="token punctuation">.</span>speed<span class="token operator">=</span><span class="token number">60</span> <span class="token comment">#calls setter</span></div>
</div>
<p>Property decorator is very convenient and recommended method of handling instance attributes.</p>
<div class="library-page-bottom-nav ">&nbsp;</div>
<div class="bottom-library-ads mt" style="margin: 5px;">
<div id="google-bottom-ads" class="google-bottom-ads">
<div style="width: 728px; height: 250px;">&nbsp;</div>
</div>
</div>
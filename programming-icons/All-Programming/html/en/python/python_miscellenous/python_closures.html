<h2>What is a Closure?</h2>
<p>A Python closure is a nested function which has access to a variable from an enclosing function that has finished its execution. Such a variable is not bound in the local scope. To use immutable variables (number or string), we have to use the non-local keyword.</p>
<p>The main advantage of Python closures is that we can help avoid the using global values and provide some form of data hiding. They are used in Python decorators.</p>
<p>Closures are closely related to nested functions and allow inner functions to capture and retain the enclosing function's local state, even after the outer function has finished execution. Understanding closures requires familiarity with nested functions, variable scope and how Python handles function objects.</p>
<ul class="list">
<li><strong>Nested Functions:</strong> In Python functions can be defined inside other functions. These are called nested functions or inner functions.</li>
<li><strong>Accessing Enclosing Scope:</strong> Inner functions can access variables from the enclosing i.e. outer scope. This is where closures come into play.</li>
<li><strong>Retention of State:</strong> When an inner function i.e. closure captures and retains variables from its enclosing scope, even if the outer function has completed execution or the scope is no longer available.</li>
</ul>
<div class="inserted-div">&nbsp;</div>
<h2>Nested Functions</h2>
<p>Nested functions in Python refer to the practice of defining one function inside another function. This concept allows us to organize code more effectively, encapsulate functionality and manage variable scope.</p>
<p>Following is the example of nested functions where functionB is defined inside functionA. Inner function is then called from inside the outer function's scope.</p>
<h3>Example</h3>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">functionA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Outer function"</span><span class="token punctuation">)</span> <span class="token keyword">def</span> <span class="token function">functionB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Inner function"</span><span class="token punctuation">)</span> functionB<span class="token punctuation">(</span><span class="token punctuation">)</span> functionA<span class="token punctuation">(</span><span class="token punctuation">)</span></div>
</div>
<h3>Output</h3>
<pre class="result notranslate">Outer function
Inner function
</pre>
<p>If the outer function receives any argument, it can be passed to the inner function as in the below example.</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">functionA</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Outer function"</span><span class="token punctuation">)</span> <span class="token keyword">def</span> <span class="token function">functionB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Inner function"</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Hi {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> functionB<span class="token punctuation">(</span><span class="token punctuation">)</span> functionA<span class="token punctuation">(</span><span class="token string">"Python"</span><span class="token punctuation">)</span></div>
</div>
<h3>Output</h3>
<pre class="result notranslate">Outer function
Inner function
Hi Python
</pre>
<h2>Variable Scope</h2>
<p>When a closure is created i.e. an inner function that captures variables from its enclosing scope, it retains access to those variables even after the outer function has finished executing. This behavior allows closures to "remember" and manipulate the values of variables from the enclosing scope.</p>
<h3>Example</h3>
<p>Following is the example of the closure with the variable scope &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">outer_function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> y <span class="token operator">=</span> <span class="token number">10</span> <span class="token keyword">def</span> <span class="token function">inner_function</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z <span class="token comment"># x and y are captured from the enclosing scope</span> <span class="token keyword">return</span> inner_function closure <span class="token operator">=</span> outer_function<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> result <span class="token operator">=</span> closure<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></div>
</div>
<h3>Output</h3>
<pre class="result notranslate">18
</pre>
<h2>Creating a closure</h2>
<p>Creating a closure in Python involves defining a nested function within an outer function and returning the inner function. Closures are useful for capturing and retaining the state of variables from the enclosing scope.</p>
<h3>Example</h3>
<p>In the below example, we have a <strong>functionA</strong> function which creates and returns another function <strong>functionB</strong>. The nested <strong>functionB</strong> function is the closure.</p>
<p>The outer <strong>functionA</strong> function returns a <strong>functionB</strong> function and assigns it to the myfunction variable. Even if it has finished its execution. However, the printer closure still has access to the name variable.</p>
<p>Following is the example of creating the closure in python &minus;</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">functionA</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span> name <span class="token operator">=</span><span class="token string">"New name"</span> <span class="token keyword">def</span> <span class="token function">functionB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">return</span> functionB myfunction <span class="token operator">=</span> functionA<span class="token punctuation">(</span><span class="token string">"My name"</span><span class="token punctuation">)</span> myfunction<span class="token punctuation">(</span><span class="token punctuation">)</span></div>
</div>
<h3>Output</h3>
<pre class="result notranslate">New name
</pre>
<h2>nonlocal Keyword</h2>
<p>In Python, nonlocal keyword allows a variable outside the local scope to be accessed. This is used in a closure to modify an immutable variable present in the scope of outer variable. Here is the example of the closure with the nonlocal keyword.</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">def</span> <span class="token function">functionA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> counter <span class="token operator">=</span><span class="token number">0</span> <span class="token keyword">def</span> <span class="token function">functionB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">nonlocal</span> counter counter<span class="token operator">+=</span><span class="token number">1</span> <span class="token keyword">return</span> counter <span class="token keyword">return</span> functionB myfunction <span class="token operator">=</span> functionA<span class="token punctuation">(</span><span class="token punctuation">)</span> retval <span class="token operator">=</span> myfunction<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Counter:"</span><span class="token punctuation">,</span> retval<span class="token punctuation">)</span> retval <span class="token operator">=</span> myfunction<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Counter:"</span><span class="token punctuation">,</span> retval<span class="token punctuation">)</span> retval <span class="token operator">=</span> myfunction<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Counter:"</span><span class="token punctuation">,</span> retval<span class="token punctuation">)</span></div>
</div>
<h3>Output</h3>
<pre class="result notranslate">Counter: 1
Counter: 2
Counter: 3
</pre>
<div class="library-page-bottom-nav ">&nbsp;</div>
<div class="bottom-library-ads mt" style="margin: 5px;">
<div id="google-bottom-ads" class="google-bottom-ads">
<div style="width: 728px; height: 250px;">&nbsp;</div>
</div>
</div>

<p>XML is a portable, open-source language that allows programmers to develop applications that can be read by other applications, regardless of operating system and/or developmental language.</p>
<h2>What is XML?</h2>
<p>The Extensible Markup Language (XML) is a markup language much like HTML or SGML. This is recommended by the World Wide Web Consortium and available as an open standard.</p>
<p>XML is extremely useful for keeping track of small to medium amounts of data without requiring an SQL- based backbone.</p>
<div class="inserted-div">&nbsp;</div>
<h2>XML Parser Architectures and APIs.</h2>
<p>The Python standard library provides a minimal but useful set of interfaces to work with XML. All the submodules for XML processing are available in the xml package.</p>
<ul class="list">
<li>
<p><strong>xml.etree.ElementTree</strong> &minus; the ElementTree API, a simple and lightweight XML processor</p>
</li>
<li>
<p><strong>xml.dom</strong> &minus; the DOM API definition.</p>
</li>
<li>
<p><strong>xml.dom.minidom</strong> &minus; a minimal DOM implementation.</p>
</li>
<li>
<p><strong>xml.dom.pulldom</strong> &minus; support for building partial DOM trees.</p>
</li>
<li>
<p><strong>xml.sax</strong> &minus; SAX2 base classes and convenience functions.</p>
</li>
<li>
<p><strong>xml.parsers.expat</strong> &minus; the Expat parser binding.</p>
</li>
</ul>
<p>The two most basic and broadly used APIs to XML data are the SAX and DOM interfaces.</p>
<ul class="list">
<li>
<p><strong>Simple API for XML (SAX)</strong> &minus; Here, you register callbacks for events of interest and then let the parser proceed through the document. This is useful when your documents are large or you have memory limitations, it parses the file as it reads it from the disk and the entire file is never stored in the memory.</p>
</li>
<li>
<p><strong>Document Object Model (DOM)</strong> &minus; This is a World Wide Web Consortium recommendation wherein the entire file is read into the memory and stored in a hierarchical (tree-based) form to represent all the features of an XML document.</p>
</li>
</ul>
<p>SAX obviously cannot process information as fast as DOM, when working with large files. On the other hand, using DOM exclusively can really kill your resources, especially if used on many small files.</p>
<p>SAX is read-only, while DOM allows changes to the XML file. Since these two different APIs literally complement each other, there is no reason why you cannot use them both for large projects.</p>
<p>For all our XML code examples, let us use a simple XML file <strong>movies.xml</strong> as an input &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token operator">&lt;</span>collection shelf<span class="token operator">=</span><span class="token string">"New Arrivals"</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>movie title<span class="token operator">=</span><span class="token string">"Enemy Behind"</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token builtin">type</span><span class="token operator">&gt;</span>War<span class="token punctuation">,</span> Thriller<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token builtin">type</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span>DVD<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token builtin">format</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>year<span class="token operator">&gt;</span><span class="token number">2003</span><span class="token operator">&lt;</span><span class="token operator">/</span>year<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>rating<span class="token operator">&gt;</span>PG<span class="token operator">&lt;</span><span class="token operator">/</span>rating<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>stars<span class="token operator">&gt;</span><span class="token number">10</span><span class="token operator">&lt;</span><span class="token operator">/</span>stars<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>Talk about a US<span class="token operator">-</span>Japan war<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>movie<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>movie title<span class="token operator">=</span><span class="token string">"Transformers"</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token builtin">type</span><span class="token operator">&gt;</span>Anime<span class="token punctuation">,</span> Science Fiction<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token builtin">type</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span>DVD<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token builtin">format</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>year<span class="token operator">&gt;</span><span class="token number">1989</span><span class="token operator">&lt;</span><span class="token operator">/</span>year<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>rating<span class="token operator">&gt;</span>R<span class="token operator">&lt;</span><span class="token operator">/</span>rating<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>stars<span class="token operator">&gt;</span><span class="token number">8</span><span class="token operator">&lt;</span><span class="token operator">/</span>stars<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>A schientific fiction<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>movie<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>movie title<span class="token operator">=</span><span class="token string">"Trigun"</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token builtin">type</span><span class="token operator">&gt;</span>Anime<span class="token punctuation">,</span> Action<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token builtin">type</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span>DVD<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token builtin">format</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>episodes<span class="token operator">&gt;</span><span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>episodes<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>rating<span class="token operator">&gt;</span>PG<span class="token operator">&lt;</span><span class="token operator">/</span>rating<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>stars<span class="token operator">&gt;</span><span class="token number">10</span><span class="token operator">&lt;</span><span class="token operator">/</span>stars<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>Vash the Stampede!<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>movie<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>movie title<span class="token operator">=</span><span class="token string">"Ishtar"</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token builtin">type</span><span class="token operator">&gt;</span>Comedy<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token builtin">type</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token builtin">format</span><span class="token operator">&gt;</span>VHS<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token builtin">format</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>rating<span class="token operator">&gt;</span>PG<span class="token operator">&lt;</span><span class="token operator">/</span>rating<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>stars<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>stars<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>Viewable boredom<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>movie<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>collection<span class="token operator">&gt;</span></div>
<h2>Parsing XML with SAX APIs</h2>
<p>SAX is a standard interface for event-driven XML parsing. Parsing XML with SAX generally requires you to create your own ContentHandler by subclassing xml.sax.ContentHandler.</p>
<p>Your ContentHandler handles the particular tags and attributes of your flavor(s) of XML. A ContentHandler object provides methods to handle various parsing events. Its owning parser calls ContentHandler methods as it parses the XML file.</p>
<p>The methods startDocument and endDocument are called at the start and the end of the XML file. The method characters(text) is passed the character data of the XML file via the parameter text.</p>
<p>The ContentHandler is called at the start and end of each element. If the parser is not in namespace mode, the methods startElement(tag, attributes) andendElement(tag) are called; otherwise, the corresponding methodsstartElementNS and endElementNS are called. Here, tag is the element tag, and attributes is an Attributes object.</p>
<p>Here are other important methods to understand before proceeding &minus;</p>
<h3>The make_parser Method</h3>
<p>The following method creates a new parser object and returns it. The parser object created will be of the first parser type, the system finds.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">xml<span class="token punctuation">.</span>sax<span class="token punctuation">.</span>make_parser<span class="token punctuation">(</span> <span class="token punctuation">[</span>parser_list<span class="token punctuation">]</span> <span class="token punctuation">)</span></div>
<p>Here is the detail of the parameters &minus;</p>
<ul class="list">
<li>
<p><strong>parser_list</strong> &minus; The optional argument consisting of a list of parsers to use, which must all implement the make_parser method.</p>
</li>
</ul>
<h3>The parse Method</h3>
<p>The following method creates a SAX parser and uses it to parse a document.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">xml<span class="token punctuation">.</span>sax<span class="token punctuation">.</span>parse<span class="token punctuation">(</span> xmlfile<span class="token punctuation">,</span> contenthandler<span class="token punctuation">[</span><span class="token punctuation">,</span> errorhandler<span class="token punctuation">]</span><span class="token punctuation">)</span></div>
<p>Here are the details of the parameters &minus;</p>
<ul class="list">
<li>
<p><strong>xmlfile</strong> &minus; This is the name of the XML file to read from.</p>
</li>
<li>
<p><strong>contenthandler</strong> &minus; This must be a ContentHandler object.</p>
</li>
<li>
<p><strong>errorhandler</strong> &minus; If specified, errorhandler must be a SAX ErrorHandler object.</p>
</li>
</ul>
<h3>The parseString Method</h3>
<p>There is one more method to create a SAX parser and to parse the specifiedXML string.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">xml<span class="token punctuation">.</span>sax<span class="token punctuation">.</span>parseString<span class="token punctuation">(</span>xmlstring<span class="token punctuation">,</span> contenthandler<span class="token punctuation">[</span><span class="token punctuation">,</span> errorhandler<span class="token punctuation">]</span><span class="token punctuation">)</span></div>
<p>Here are the details of the parameters &minus;</p>
<ul class="list">
<li>
<p><strong>xmlstring</strong> &minus; This is the name of the XML string to read from.</p>
</li>
<li>
<p><strong>contenthandler</strong> &minus; This must be a ContentHandler object.</p>
</li>
<li>
<p><strong>errorhandler</strong> &minus; If specified, errorhandler must be a SAX ErrorHandler object.</p>
</li>
</ul>
<h3>Example</h3>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">import</span> xml<span class="token punctuation">.</span>sax <span class="token keyword">class</span> <span class="token class-name">MovieHandler</span><span class="token punctuation">(</span> xml<span class="token punctuation">.</span>sax<span class="token punctuation">.</span>ContentHandler <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">=</span> <span class="token string">""</span> self<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">=</span> <span class="token string">""</span> self<span class="token punctuation">.</span><span class="token builtin">format</span> <span class="token operator">=</span> <span class="token string">""</span> self<span class="token punctuation">.</span>year <span class="token operator">=</span> <span class="token string">""</span> self<span class="token punctuation">.</span>rating <span class="token operator">=</span> <span class="token string">""</span> self<span class="token punctuation">.</span>stars <span class="token operator">=</span> <span class="token string">""</span> self<span class="token punctuation">.</span>description <span class="token operator">=</span> <span class="token string">""</span> <span class="token comment"># Call when an element starts</span> <span class="token keyword">def</span> <span class="token function">startElement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">=</span> tag <span class="token keyword">if</span> tag <span class="token operator">==</span> <span class="token string">"movie"</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"*****Movie*****"</span><span class="token punctuation">)</span> title <span class="token operator">=</span> attributes<span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Title:"</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span> <span class="token comment"># Call when an elements ends</span> <span class="token keyword">def</span> <span class="token function">endElement</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> tag<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Type:"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">)</span> <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"format"</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Format:"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">)</span> <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"year"</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Year:"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>year<span class="token punctuation">)</span> <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"rating"</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Rating:"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>rating<span class="token punctuation">)</span> <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"stars"</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Stars:"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>stars<span class="token punctuation">)</span> <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"description"</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Description:"</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>description<span class="token punctuation">)</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">=</span> <span class="token string">""</span> <span class="token comment"># Call when a character is read</span> <span class="token keyword">def</span> <span class="token function">characters</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"type"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">=</span> content <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"format"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span><span class="token builtin">format</span> <span class="token operator">=</span> content <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"year"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>year <span class="token operator">=</span> content <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"rating"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>rating <span class="token operator">=</span> content <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"stars"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>stars <span class="token operator">=</span> content <span class="token keyword">elif</span> self<span class="token punctuation">.</span>CurrentData <span class="token operator">==</span> <span class="token string">"description"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>description <span class="token operator">=</span> content <span class="token keyword">if</span> <span class="token punctuation">(</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># create an XMLReader</span> parser <span class="token operator">=</span> xml<span class="token punctuation">.</span>sax<span class="token punctuation">.</span>make_parser<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># turn off namepsaces</span> parser<span class="token punctuation">.</span>setFeature<span class="token punctuation">(</span>xml<span class="token punctuation">.</span>sax<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>feature_namespaces<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># override the default ContextHandler</span> Handler <span class="token operator">=</span> MovieHandler<span class="token punctuation">(</span><span class="token punctuation">)</span> parser<span class="token punctuation">.</span>setContentHandler<span class="token punctuation">(</span> Handler <span class="token punctuation">)</span> parser<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">"movies.xml"</span><span class="token punctuation">)</span></div>
<p>This would produce the following result &minus;</p>
<pre class="result notranslate">*****Movie*****
Title: Enemy Behind
Type: War, Thriller
Format: DVD
Year: 2003
Rating: PG
Stars: 10
Description: Talk about a US-Japan war
*****Movie*****
Title: Transformers
Type: Anime, Science Fiction
Format: DVD
Year: 1989
Rating: R
Stars: 8
Description: A schientific fiction
*****Movie*****
Title: Trigun
Type: Anime, Action
Format: DVD
Rating: PG
Stars: 10
Description: Vash the Stampede!
*****Movie*****
Title: Ishtar
Type: Comedy
Format: VHS
Rating: PG
Stars: 2
Description: Viewable boredom
</pre>
<p>For a complete detail on SAX API documentation, please refer to standard <a href="http://docs.python.org/library/xml.sax.html" target="_blank" rel="nofollow">Python SAX APIs</a>.</p>
<h2>Parsing XML with DOM APIs</h2>
<p>The Document Object Model ("DOM") is a cross-language API from the World Wide Web Consortium (W3C) for accessing and modifying the XML documents.</p>
<p>The DOM is extremely useful for random-access applications. SAX only allows you a view of one bit of the document at a time. If you are looking at one SAX element, you have no access to another.</p>
<p>Here is the easiest way to load an XML document quickly and to create a minidom object using the xml.dom module. The minidom object provides a simple parser method that quickly creates a DOM tree from the XML file.</p>
<p>The sample phrase calls the parse( file [,parser] ) function of the minidom object to parse the XML file, designated by file into a DOM tree object.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>minidom <span class="token keyword">import</span> parse <span class="token keyword">import</span> xml<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>minidom <span class="token comment"># Open XML document using minidom parser</span> DOMTree <span class="token operator">=</span> xml<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>minidom<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">"movies.xml"</span><span class="token punctuation">)</span> collection <span class="token operator">=</span> DOMTree<span class="token punctuation">.</span>documentElement <span class="token keyword">if</span> collection<span class="token punctuation">.</span>hasAttribute<span class="token punctuation">(</span><span class="token string">"shelf"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Root element : %s"</span> <span class="token operator">%</span> collection<span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"shelf"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Get all the movies in the collection</span> movies <span class="token operator">=</span> collection<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">"movie"</span><span class="token punctuation">)</span> <span class="token comment"># Print detail of each movie.</span> <span class="token keyword">for</span> movie <span class="token keyword">in</span> movies<span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"*****Movie*****"</span><span class="token punctuation">)</span> <span class="token keyword">if</span> movie<span class="token punctuation">.</span>hasAttribute<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Title: %s"</span> <span class="token operator">%</span> movie<span class="token punctuation">.</span>getAttribute<span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token builtin">type</span> <span class="token operator">=</span> movie<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Type: %s"</span> <span class="token operator">%</span> <span class="token builtin">type</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token builtin">format</span> <span class="token operator">=</span> movie<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">'format'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Format: %s"</span> <span class="token operator">%</span> <span class="token builtin">format</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span> rating <span class="token operator">=</span> movie<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">'rating'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Rating: %s"</span> <span class="token operator">%</span> rating<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span> description <span class="token operator">=</span> movie<span class="token punctuation">.</span>getElementsByTagName<span class="token punctuation">(</span><span class="token string">'description'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Description: %s"</span> <span class="token operator">%</span> description<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span></div>
<p>This would produce the following <strong>output</strong> &minus;</p>
<pre class="result notranslate">Root element : New Arrivals
*****Movie*****
Title: Enemy Behind
Type: War, Thriller
Format: DVD
Rating: PG
Description: Talk about a US-Japan war
*****Movie*****
Title: Transformers
Type: Anime, Science Fiction
Format: DVD
Rating: R
Description: A schientific fiction
*****Movie*****
Title: Trigun
Type: Anime, Action
Format: DVD
Rating: PG
Description: Vash the Stampede!
*****Movie*****
Title: Ishtar
Type: Comedy
Format: VHS
Rating: PG
Description: Viewable boredom
</pre>
<p>For a complete detail on DOM API documentation, please refer to standard <a href="http://docs.python.org/library/xml.dom.html" target="_blank" rel="nofollow">Python DOM APIs</a>.</p>
<h2>ElementTree XML API</h2>
<p>The xml package has an ElementTree module. This is a simple and lightweight XML processor API.</p>
<p>XML is a tree-like hierarchical data format. The 'ElementTree' in this module treats the whole XML document as a tree. The 'Element' class represents a single node in this tree. Reading and writing operations on XML files are done on the ElementTree level. Interactions with a single XML element and its sub-elements are done on the Element level.</p>
<h2>Create an XML File</h2>
<p>The tree is a hierarchical structure of elements starting with root followed by other elements. Each element is created by using the Element() function of this module.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> et e<span class="token operator">=</span>et<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span></div>
<p>Each element is characterized by a tag and attrib attribute which is a dict object. For tree's starting element, attrib is an empty dictionary.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> root<span class="token operator">=</span>xml<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">'employees'</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> root<span class="token punctuation">.</span>tag <span class="token string">'employees'</span> <span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> root<span class="token punctuation">.</span>attrib <span class="token punctuation">{</span><span class="token punctuation">}</span></div>
<p>You may now set up one or more child elements to be added under the root element. Each child may have one or more sub elements. Add them using the SubElement() function and define its text attribute.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">child<span class="token operator">=</span>xml<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">"employee"</span><span class="token punctuation">)</span> nm <span class="token operator">=</span> xml<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span> nm<span class="token punctuation">.</span>text <span class="token operator">=</span> student<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> age <span class="token operator">=</span> xml<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token string">"salary"</span><span class="token punctuation">)</span> age<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'salary'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></div>
<p>Each child is added to root by append() function as &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">root<span class="token punctuation">.</span>append<span class="token punctuation">(</span>child<span class="token punctuation">)</span></div>
<p>After adding required number of child elements, construct a tree object by elementTree() function &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">tree <span class="token operator">=</span> et<span class="token punctuation">.</span>ElementTree<span class="token punctuation">(</span>root<span class="token punctuation">)</span></div>
<p>The entire tree structure is written to a binary file by tree object's write() function &minus;</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">f<span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'employees.xml'</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> tree<span class="token punctuation">.</span>write<span class="token punctuation">(</span>f<span class="token punctuation">)</span></div>
<h3>Example</h3>
<p>In this example, a tree is constructed out of a list of dictionary items. Each dictionary item holds key-value pairs describing a student data structure. The tree so constructed is written to 'myfile.xml'</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> et employees<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span><span class="token string">'aaa'</span><span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">:</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token string">'sal'</span><span class="token punctuation">:</span><span class="token number">5000</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">'name'</span><span class="token punctuation">:</span>xyz<span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">:</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">'sal'</span><span class="token punctuation">:</span><span class="token number">6000</span><span class="token punctuation">}</span><span class="token punctuation">]</span> root <span class="token operator">=</span> et<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">"employees"</span><span class="token punctuation">)</span> <span class="token keyword">for</span> employee <span class="token keyword">in</span> employees<span class="token punctuation">:</span> child<span class="token operator">=</span>xml<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">"employee"</span><span class="token punctuation">)</span> root<span class="token punctuation">.</span>append<span class="token punctuation">(</span>child<span class="token punctuation">)</span> nm <span class="token operator">=</span> xml<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span> nm<span class="token punctuation">.</span>text <span class="token operator">=</span> student<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span> age <span class="token operator">=</span> xml<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">)</span> age<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> sal<span class="token operator">=</span>xml<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>child<span class="token punctuation">,</span> <span class="token string">"sal"</span><span class="token punctuation">)</span> sal<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'sal'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> tree <span class="token operator">=</span> et<span class="token punctuation">.</span>ElementTree<span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'employees.xml'</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fh<span class="token punctuation">:</span> tree<span class="token punctuation">.</span>write<span class="token punctuation">(</span>fh<span class="token punctuation">)</span></div>
<p>The 'myfile.xml' is stored in current working directory.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token operator">&lt;</span>employees<span class="token operator">&gt;</span><span class="token operator">&lt;</span>employee<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>aaa<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>age<span class="token operator">&gt;</span><span class="token number">21</span><span class="token operator">&lt;</span><span class="token operator">/</span>age<span class="token operator">&gt;</span><span class="token operator">&lt;</span>sal<span class="token operator">&gt;</span><span class="token number">5000</span><span class="token operator">&lt;</span><span class="token operator">/</span>sal<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>employee<span class="token operator">&gt;</span><span class="token operator">&lt;</span>employee<span class="token operator">&gt;</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>xyz<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span><span class="token operator">&lt;</span>age<span class="token operator">&gt;</span><span class="token number">22</span><span class="token operator">&lt;</span><span class="token operator">/</span>age<span class="token operator">&gt;</span><span class="token operator">&lt;</span>sal<span class="token operator">&gt;</span><span class="token number">60</span><span class="token operator">&lt;</span><span class="token operator">/</span>sal<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>employee<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>employee<span class="token operator">&gt;</span></div>
<h2>Parse an XML File</h2>
<p>Let us now read back the 'myfile.xml' created in above example. For this purpose, following functions in ElementTree module will be used &minus;</p>
<p><strong>ElementTree()</strong> &minus; This function is overloaded to read the hierarchical structure of elements to a tree objects.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">tree <span class="token operator">=</span> et<span class="token punctuation">.</span>ElementTree<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token string">'students.xml'</span><span class="token punctuation">)</span></div>
<p><strong>getroot()</strong> &minus; This function returns root element of the tree.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">root <span class="token operator">=</span> tree<span class="token punctuation">.</span>getroot<span class="token punctuation">(</span><span class="token punctuation">)</span></div>
<p>You can obtain the list of sub-elements one level below of an element.</p>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false">children <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span></div>
<p>In the following example, elements and sub-elements of the 'myfile.xml' are parsed into a list of dictionary items.</p>
<h3>Example</h3>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> et tree <span class="token operator">=</span> et<span class="token punctuation">.</span>ElementTree<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token string">'employees.xml'</span><span class="token punctuation">)</span> root <span class="token operator">=</span> tree<span class="token punctuation">.</span>getroot<span class="token punctuation">(</span><span class="token punctuation">)</span> employees<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> children <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token keyword">for</span> child <span class="token keyword">in</span> children<span class="token punctuation">:</span> employee<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span> pairs <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span> <span class="token keyword">for</span> pair <span class="token keyword">in</span> pairs<span class="token punctuation">:</span> employee<span class="token punctuation">[</span>pair<span class="token punctuation">.</span>tag<span class="token punctuation">]</span><span class="token operator">=</span>pair<span class="token punctuation">.</span>text employees<span class="token punctuation">.</span>append<span class="token punctuation">(</span>employee<span class="token punctuation">)</span> <span class="token keyword">print</span> <span class="token punctuation">(</span>employees<span class="token punctuation">)</span></div>
</div>
<p>It will produce the following <strong>output</strong> &minus;</p>
<pre class="result notranslate">[{'name': 'aaa', 'age': '21', 'sal': '5000'}, {'name': 'xyz', 'age':'22', 'sal': '6000'}]
</pre>
<h2>Modify an XML file</h2>
<p>We shall use iter() function of Element. It creates a tree iterator for given tag with the current element as the root. The iterator iterates over this element and all elements below it, in document (depth first) order.</p>
<p>Let us build iterator for all 'marks' subelements and increment text of each sal tag by 100.</p>
<div class="code-wrapper">
<div class="code-header">
<div class="logo-side">&nbsp;</div>
<div class="button-side">
<div class="execute">&nbsp;</div>
<div class="open-compiler">Open Compiler</div>
</div>
</div>
<div class="code-mirror  language-python" style="outline: none; overflow-wrap: break-word; overflow-y: auto; white-space: pre-wrap;" contenteditable="plaintext-only" spellcheck="false"><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> et tree <span class="token operator">=</span> et<span class="token punctuation">.</span>ElementTree<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token operator">=</span><span class="token string">'students.xml'</span><span class="token punctuation">)</span> root <span class="token operator">=</span> tree<span class="token punctuation">.</span>getroot<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> root<span class="token punctuation">.</span><span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token string">'sal'</span><span class="token punctuation">)</span><span class="token punctuation">:</span> s<span class="token operator">=</span><span class="token builtin">int</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>text<span class="token punctuation">)</span> s<span class="token operator">=</span>s<span class="token operator">+</span><span class="token number">100</span> x<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"employees.xml"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fh<span class="token punctuation">:</span> tree<span class="token punctuation">.</span>write<span class="token punctuation">(</span>fh<span class="token punctuation">)</span></div>
</div>
<p>Our 'employees.xml' will now be modified accordingly. We can also use set() to update value of a certain key.</p>
<pre class="result notranslate">x.set(marks, str(mark))
</pre>
<div class="library-page-bottom-nav ">&nbsp;</div>
<div class="bottom-library-ads mt" style="margin: 5px;">
<div id="google-bottom-ads" class="google-bottom-ads">
<div style="width: 728px; height: 250px;">&nbsp;</div>
</div>
</div>
</div>